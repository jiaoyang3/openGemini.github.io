import{_ as p,X as u,Y as m,$ as e,a1 as t,Z as a,a0 as n,a3 as _,C as s}from"./framework-1e2d737a.js";const h="/assets/line_protocol_one-22a2f7ba.png",g="/assets/line_protocol_two-14df1b42.png",b={},v=e("p",null,"Line Protocol（行协议） 是InfluxDB提出的一种基于文本的数据格式，openGemini使用相同Line Protocol，用于将points 写入 openGemini。",-1),k=e("strong",null,"了解更多关于行协议的详细定义、用法、特殊字符等",-1),f={href:"https://docs.influxdata.com/influxdb/cloud/reference/syntax/line-protocol/",target:"_blank",rel:"noopener noreferrer"},x=_(`<h2 id="行协议数据格式" tabindex="-1"><a class="header-anchor" href="#行协议数据格式" aria-hidden="true">#</a> 行协议数据格式</h2><p>Line protocol 格式的单行文本代表一个point，换言之，point由measurement（表名）、tag set（多个tag的集合），field set（多个field的集合）以及timestamp组成。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;measurement&gt;[,&lt;tag_key&gt;=&lt;tag_value&gt;[,&lt;tag_key&gt;=&lt;tag_value&gt;]] &lt;field_key&gt;=&lt;field_value&gt;[,&lt;field_key&gt;=&lt;field_value&gt;] [&lt;timestamp&gt;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>举个例子</strong></p><img src="`+h+'" style="zoom:50%;"><p>表示该Point属于表<code>Weather</code>，<code>Location</code>表示温度传感器的位置在<code>us-midwest</code>，在这个时刻<code>1465839830100400200</code>的温度是82华氏度。</p><p><strong>再举个例子</strong></p><img src="'+g+'" style="zoom:50%;"><p>表示该Point属于表<code>monitor</code>，<code>region</code>和<code>host</code>标识<code>beijing</code>区域的<code>10.0.1.11</code>这台机器，在这个时刻<code>1465839830100400200</code>的cpu利用率和内存利用率分别是43%和1465839KB</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>行协议数据格式记住下面口诀：</p><ul><li>measurement与tag之间用“逗号”分割</li><li>Tag与Tag之间、Field和Field之间用“逗号”分割，“逗号”后不能再有空格。</li><li>Tag与Field、Field与timestamp之间要用“空格”分开。</li></ul></div><h2 id="行协议数据格式写入" tabindex="-1"><a class="header-anchor" href="#行协议数据格式写入" aria-hidden="true">#</a> 行协议数据格式写入</h2>',11),w=e("p",null,"使用ts-cli命令将数据写入openGemini数据库，启动命令行界面（CLI）写入相关的数据库，并将Insert放在line procotol前面:",-1),y=e("div",{class:"language-sql line-numbers-mode","data-ext":"sql"},[e("pre",{class:"language-sql"},[e("code",null,[e("span",{class:"token operator"},">"),t(),e("span",{class:"token keyword"},"INSERT"),t(" weather"),e("span",{class:"token punctuation"},","),t("location"),e("span",{class:"token operator"},"="),t("us"),e("span",{class:"token operator"},"-"),t("midwest temperature"),e("span",{class:"token operator"},"="),e("span",{class:"token number"},"82"),t(),e("span",{class:"token number"},"1465839830100400200"),t(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),L=e("p",null,[t("使用openGemini API将数据写入openGemini，使用"),e("code",null,"POST"),t("向`/write方法发起请求，并在请求正文中提供您的line protocol：")],-1),P=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token operator"},">"),t(),e("span",{class:"token function"},"curl"),t(),e("span",{class:"token parameter variable"},"-i"),t(),e("span",{class:"token parameter variable"},"-XPOST"),t(),e("span",{class:"token string"},'"http://localhost:8086/write?db=science_is_cool"'),t(" --data-binary "),e("span",{class:"token string"},"'weather,location=us-midwest temperature=82 1465839830100400200'"),t(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),T=e("p",null,"批量写入数据：",-1),I=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token operator"},">"),t(),e("span",{class:"token function"},"curl"),t(),e("span",{class:"token parameter variable"},"-i"),t(),e("span",{class:"token parameter variable"},"-XPOST"),t(),e("span",{class:"token string"},'"http://localhost:8086/write?db=db0"'),t(" --data-binary "),e("span",{class:"token string"},`'
weather,location=us-midwest temperature=82 1465839830100400200
weather,location=us-midwest temperature=83 1465839830100400300
weather,location=us-midwest temperature=84 1465839830100400400
'`),t(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),G=e("p",null,"写入文件数据:",-1),B=e("p",null,"假设数据按line protocol data保存在文件data.txt中",-1),S=e("div",{class:"language-text line-numbers-mode","data-ext":"text"},[e("pre",{class:"language-text"},[e("code",null,`weather,location=us-midwest temperature=82 1465839830100400200
weather,location=us-midwest temperature=83 1465839830100400300
weather,location=us-midwest temperature=84 1465839830100400400
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),C=e("p",null,"可通过如下命令把数据写入openGemini",-1),N=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token operator"},">"),t(),e("span",{class:"token function"},"curl"),t(),e("span",{class:"token parameter variable"},"-i"),t(),e("span",{class:"token parameter variable"},"-XPOST"),t(),e("span",{class:"token string"},"'http://localhost:8086/write?db=db0'"),t(` --data-binary @data.txt
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1);function A(E,F){const o=s("ExternalLinkIcon"),l=s("RouterLink"),i=s("Tabs");return u(),m("div",null,[v,e("p",null,[k,t("，可以参考"),e("a",f,[t("InfluxDB Line Protocol"),a(o)]),t(" 或者 "),a(l,{to:"/zh/guide/reference/line_protocol.html"},{default:n(()=>[t("openGemini数据行协议")]),_:1})]),x,a(i,{id:"52",data:[{title:"CLI"},{title:"API"}]},{tab0:n(({title:r,value:c,isActive:d})=>[w,y]),tab1:n(({title:r,value:c,isActive:d})=>[L,P,T,I,G,B,S,C,N]),_:1})])}const V=p(b,[["render",A],["__file","insert_line_protocol.html.vue"]]);export{V as default};
